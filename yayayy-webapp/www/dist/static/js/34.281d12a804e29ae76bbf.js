webpackJsonp([34],{GJJg:function(t,e,a){var i=a("Z5WP");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("cbedb4ac",i,!0)},YgR6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.data,border:""},on:{"sort-change":t.handleSort}},[a("el-table-column",{attrs:{prop:"adv_name",label:"广告名称",align:"center","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adv_html",label:"关联HTML",align:"center","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adv_pic",label:"Adv图片",align:"center","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.adv_pic,width:"300"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"show_flag",label:"激活状态",align:"center","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"广告编辑",visible:t.dialogFormVisible,size:"tiny"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.lookloading,expression:"lookloading"}],ref:"editForm",attrs:{model:t.editForm,"label-width":"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.id,expression:"editForm.id"}],attrs:{type:"hidden"},domProps:{value:t.editForm.id},on:{input:function(e){e.target.composing||t.$set(t.editForm,"id",e.target.value)}}}),t._v(" "),a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{model:{value:t.editForm.adv_name,callback:function(e){t.$set(t.editForm,"adv_name",e)},expression:"editForm.adv_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"广告图片"}},[a("div",{staticClass:"imgSrc"},[a("span",{staticStyle:{"white-space":"pre"}}),a("img",{attrs:{src:t.imgDataUrl,width:"200"}})]),t._v(" "),a("div",{staticClass:"a-upload"},[a("input",{staticClass:"upload__input",attrs:{type:"file",name:"file",accept:"image/png,image/jpeg"},on:{change:t.uploadChange}}),t._v("选择文件上传\r\n\t\t\t\t")])]),t._v(" "),a("el-form-item",{attrs:{label:"关联HTML"}},[a("el-input",{model:{value:t.editForm.adv_html,callback:function(e){t.$set(t.editForm,"adv_html",e)},expression:"editForm.adv_html"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否激活"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.editForm.show_flag,callback:function(e){t.$set(t.editForm,"show_flag",e)},expression:"editForm.show_flag"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.handleSave}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)],1)},o=[],l={render:i,staticRenderFns:o};e.a=l},Z5WP:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".handle-box[data-v-fbf64438]{margin-bottom:20px}.handle-select[data-v-fbf64438]{width:120px}.handle-input[data-v-fbf64438]{width:150px;display:inline-block}.a-upload[data-v-fbf64438]{padding:4px 10px;height:28px;line-height:20px;position:relative;cursor:pointer;color:#888;background:#fafafa;border:1px solid #ddd;border-radius:4px;overflow:hidden;display:inline-block;*display:inline;*zoom:1}.a-upload input[data-v-fbf64438]{position:absolute;font-size:100px;right:0;top:0;opacity:0;filter:alpha(opacity=0);cursor:pointer}.a-upload[data-v-fbf64438]:hover{color:#444;background:#eee;border-color:#ccc;text-decoration:none}",""])},e3xa:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a("woOf"),l=i(o),n=a("3pLw"),r=i(n),d=a("woQ9");e.default={data:function(){return{getdataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticleAdv/getId.do",dataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticleAdv/dataList.do",saveurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticleAdv/save.do",deleteurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticleAdv/delete.do",dialogFormVisible:!1,editLoading:!1,lookloading:!1,imgDataUrl:"",editForm:{adv_name:"",adv_pic:"",adv_html:"",show_flag:"",createtime:"",abled:{adv_name:!0,adv_pic:!0,adv_html:!0,show_flag:!0,createtime:!0}},editForm_sysMenu_ids:[],searchForm:{adv_name:"",adv_pic:"",adv_html:"",show_flag:"",createtime:"",pageNum:1,totalRow:0,pageSize:10,is_search:!1,order:""},tableData:[]}},created:function(){this.loadData()},computed:{data:function(){return this.tableData}},methods:{loadData:function(){var t=this,e=this;r.default.post(e.dataurl,this.searchForm,function(a){e.tableData=a.data.list,e.searchForm.totalRow=a.data.totalRow;for(var i=0;i<e.tableData.length;i++){var o=e.tableData[i].show_flag;"0"==o&&(e.tableData[i].show_flag=""),"1"==o&&(e.tableData[i].show_flag="激活中"),e.tableData[i].adv_pic="http://img-demo.oss-cn-hangzhou.aliyuncs.com/"+e.tableData[i].adv_pic+"?x-oss-process=image/resize,w_300",null!=e.tableData[i].createtime&&(e.tableData[i].createtime=(0,d.fdate)(e.tableData[i].createtime))}t.searchForm.is_search=!1}).catch(function(e){t.$eventHub.$emit("error",e)})},handleCurrentChange:function(t){this.searchForm.pageNum=t,this.loadData()},handleSearch:function(){this.searchForm.is_search=!0,this.loadData()},handleSort:function(t){return console.log(t),this.searchForm.order=t.prop+" "+t.order.replace("ending",""),this.handleSearch(),!1},handleAdd:function(){var t=this;"9"==t.tableData.length?this.$message.error({title:"错误",message:"Banner个数不能超过10个"}):(this.dialogFormVisible=!0,this.imgDataUrl="",t.lookloading=!1,this.editForm={adv_name:"",adv_pic:"",adv_html:"",show_flag:"",createtime:"",abled:{adv_name:!0,adv_pic:!0,adv_html:!0,show_flag:!0,createtime:!0}})},handleEdit:function(t,e){var a=this,i=this;i.dialogFormVisible=!0,i.lookloading=!1,i.editForm=(0,l.default)({},e),i.editForm.abled||(i.editForm.abled={}),i.editForm.abled.rolecode=!1,r.default.post(i.getdataurl+"?id="+i.editForm.id,{},function(t){i.editForm.adv_name=t.data.adv_name,i.editForm.adv_pic=t.data.adv_pic,a.imgDataUrl="http://img-demo.oss-cn-hangzhou.aliyuncs.com/"+t.data.adv_pic+"?x-oss-process=image/resize,w_200",i.editForm.adv_html=t.data.adv_html,i.editForm.show_flag=t.data.show_flag,i.editForm.createtime=t.data.createtime}).catch(function(t){i.$eventHub.$emit("error",t)})},handleDelete:function(t,e){var a=this;this.$confirm("确定删除此条广告？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.default.post(a.deleteurl,{id:e.id},function(t){a.loadData()}).catch(function(t){a.$eventHub.$emit("error",t)})}).catch(function(){})},handleSave:function(){var t=this,e=this;this.lookloading=!0,r.default.post(e.saveurl,{id:e.editForm.id,adv_name:e.editForm.adv_name,adv_pic:e.editForm.adv_pic,adv_html:e.editForm.adv_html,show_flag:e.editForm.show_flag,createtime:e.editForm.createtime,pic_base:e.editForm.pic_base},function(a){if(t.lookloading=!1,200==a.status&&a.data&&200==a.data.statusCode)return e.loadData(),void(e.dialogFormVisible=!1);t.$message.error({title:"错误",message:a.data.msg})}).catch(function(t){e.$eventHub.$emit("error",t)})},uploadChange:function(t){var e=this,a=this;t.target.files.length>0&&(this.files=t.target.files[0],this.getBase64(t.target,function(t){e.imgDataUrl="data:image/png;base64,"+t,a.editForm.pic_base=t}))},getBase64:function(t,e){if(t.files&&t.files[0]){if(t.files[0].size>2019200)return void alert("图片不能超过2M");var a=new FileReader;a.onload=function(t){var a=t.target.result,i=new Image;i.onload=function(){var t=document.getElementById("canvasBase64Imgid");null!=t&&document.body.removeChild(t);var t=document.createElement("canvas");t.innerHTML="New Canvas",t.setAttribute("id","canvasBase64Imgid"),t.style.display="none",document.body.appendChild(t),t.width=this.width,t.height=this.height;var a=this.width,i=this.height,o=t.getContext("2d");o.clearRect(0,0,a,i),o.drawImage(this,0,0,a,i);var l=t.toDataURL("image/png",1),n=l.substr(22);e(n)},i.src=a},a.readAsDataURL(t.files[0])}},handleFalse:function(){return!1}}}},jrke:function(t,e,a){"use strict";function i(t){a("GJJg")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("e3xa"),l=a.n(o),n=a("YgR6"),r=a("VU/8"),d=i,s=r(l.a,n.a,!1,d,"data-v-fbf64438",null);e.default=s.exports},woQ9:function(t,e,a){"use strict";function i(t){if(console.log("time=",t),t.length>20){return t.substring(0,10)+" "+t.substring(11,19)}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.fdate=i}});