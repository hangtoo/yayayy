webpackJsonp([33],{"8VBI":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,border:""},on:{"sort-change":e.handleSort}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"banner_name",label:"banner名称",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"banner_html",label:"关联HTML",align:"center","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"banner_pic",label:"banner图片",align:"center","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.banner_pic,width:"200"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"顺序",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"!==t.row.banner_order?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleUp(t.$index,t.row)}}},[e._v("上移")]):e._e(),e._v(" "),t.row.banner_order!==t.row.tote+""?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleDown(t.$index,t.row)}}},[e._v("下移")]):e._e(),e._v(" "),"1"!==t.row.banner_order?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleTop(t.$index,t.row)}}},[e._v("置顶")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"Banner",visible:e.dialogFormVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.lookloading,expression:"lookloading"}],ref:"editForm",attrs:{model:e.editForm,"label-width":"90px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.id,expression:"editForm.id"}],attrs:{type:"hidden"},domProps:{value:e.editForm.id},on:{input:function(t){t.target.composing||e.$set(e.editForm,"id",t.target.value)}}}),e._v(" "),a("el-form-item",{attrs:{label:"banner名称"}},[a("el-input",{model:{value:e.editForm.banner_name,callback:function(t){e.$set(e.editForm,"banner_name",t)},expression:"editForm.banner_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联图片"}},[a("div",{staticClass:"imgSrc"},[a("span",{staticStyle:{"white-space":"pre"}}),a("img",{attrs:{src:e.imgDataUrl,width:"200"}})]),e._v(" "),a("div",{staticClass:"a-upload"},[a("input",{staticClass:"upload__input",attrs:{type:"file",name:"file",accept:"image/png,image/jpeg"},on:{change:e.uploadChange}}),e._v("选择文件上传\r\n\t\t\t\t")])]),e._v(" "),a("el-form-item",{attrs:{label:"关联HTML"}},[a("el-input",{model:{value:e.editForm.banner_html,callback:function(t){e.$set(e.editForm,"banner_html",t)},expression:"editForm.banner_html"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},r=[],o={render:n,staticRenderFns:r};t.a=o},BMLc:function(e,t,a){var n=a("I5iJ");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("52333378",n,!0)},I5iJ:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".handle-box[data-v-a41851ca]{margin-bottom:20px}.handle-select[data-v-a41851ca]{width:120px}.handle-input[data-v-a41851ca]{width:150px;display:inline-block}.a-upload[data-v-a41851ca]{padding:4px 10px;height:28px;line-height:20px;position:relative;cursor:pointer;color:#888;background:#fafafa;border:1px solid #ddd;border-radius:4px;overflow:hidden;display:inline-block;*display:inline;*zoom:1}.a-upload input[data-v-a41851ca]{position:absolute;font-size:100px;right:0;top:0;opacity:0;filter:alpha(opacity=0);cursor:pointer}.a-upload[data-v-a41851ca]:hover{color:#444;background:#eee;border-color:#ccc;text-decoration:none}",""])},MPQd:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),o=n(r),i=a("3pLw"),l=n(i),d=a("woQ9");t.default={data:function(){return{getdataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/getId.do",dataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/dataList.do",saveurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/save.do",orderupurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/orderUp.do",orderdownurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/orderDown.do",ordertopurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/orderTop.do",deleteurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tBanner/delete.do",dialogFormVisible:!1,editLoading:!1,lookloading:!1,imgDataUrl:"",editForm:{banner_name:"",banner_pic:"",banner_html:"",banner_order:"",createtime:"",pic_base:"",tota:"",abled:{banner_name:!1,banner_pic:!1,banner_html:!1,banner_order:!1,createtime:!1}},editForm_sysMenu_ids:[],searchForm:{banner_name:"",banner_pic:"",banner_html:"",banner_order:"",createtime:"",tota:"",pageNum:1,totalRow:0,pageSize:10,is_search:!1,order:""},tableData:[]}},created:function(){this.loadData()},computed:{data:function(){return this.tableData}},methods:{loadData:function(){var e=this,t=this;l.default.post(t.dataurl,this.searchForm,function(a){t.tableData=a.data.list,t.searchForm.totalRow=a.data.totalRow;for(var n=0;n<t.tableData.length;n++)t.tableData[n].banner_pic="http://img-demo.oss-cn-hangzhou.aliyuncs.com/"+t.tableData[n].banner_pic+"?x-oss-process=image/resize,w_200",null!=t.tableData[n].createtime&&(t.tableData[n].createtime=(0,d.fdate)(t.tableData[n].createtime));e.searchForm.is_search=!1}).catch(function(t){e.$eventHub.$emit("error",t)})},handleCurrentChange:function(e){this.searchForm.pageNum=e,this.loadData()},handleSearch:function(){this.searchForm.is_search=!0,this.loadData()},handleSort:function(e){return console.log(e),this.searchForm.order=e.prop+" "+e.order.replace("ending",""),this.handleSearch(),!1},handleAdd:function(){var e=this;"9"==e.tableData.length?this.$message.error({title:"错误",message:"Banner个数不能超过10个"}):(this.dialogFormVisible=!0,e.lookloading=!1,this.imgDataUrl="",this.editForm={banner_name:"",banner_pic:"",banner_html:"",banner_order:"",createtime:"",tota:"",abled:{banner_name:!1,banner_pic:!1,banner_html:!1,banner_order:!1,createtime:!1}})},handleEdit:function(e,t){var a=this,n=this;n.dialogFormVisible=!0,n.lookloading=!1,n.editForm=(0,o.default)({},t),n.editForm.abled||(n.editForm.abled={}),n.editForm.abled.rolecode=!1,l.default.post(n.getdataurl+"?id="+n.editForm.id,{},function(e){n.editForm.banner_name=e.data.banner_name,n.editForm.banner_pic=e.data.banner_pic,a.imgDataUrl="http://img-demo.oss-cn-hangzhou.aliyuncs.com/"+e.data.banner_pic+"?x-oss-process=image/resize,w_200",n.editForm.banner_html=e.data.banner_html,n.editForm.banner_order=e.data.banner_order,n.editForm.createtime=e.data.createtime}).catch(function(e){n.$eventHub.$emit("error",e)})},handleUp:function(e,t){var a=this;"1"==t.banner_order?this.$message.error({title:"错误",message:"已经在最上,无法上移"}):l.default.post(a.orderupurl,{id:t.id,banner_order:t.banner_order},function(e){a.loadData()}).catch(function(e){a.$eventHub.$emit("error",e)})},handleTop:function(e,t){var a=this;l.default.post(a.ordertopurl,{id:t.id,banner_order:t.banner_order,tote:a.tableData.length},function(e){a.loadData()}).catch(function(e){a.$eventHub.$emit("error",e)})},handleDown:function(e,t){var a=this;console.log(t),t.banner_order==a.tableData.length?this.$message.error({title:"错误",message:"已经在最下,无法下移"}):l.default.post(a.orderdownurl,{id:t.id,banner_order:t.banner_order},function(e){a.loadData()}).catch(function(e){a.$eventHub.$emit("error",e)})},handleDelete:function(e,t){var a=this;this.$confirm("确定删除此条Banner？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.default.post(a.deleteurl,{id:t.id,banner_order:t.banner_order,tote:a.tableData.length},function(e){a.loadData()}).catch(function(e){a.$eventHub.$emit("error",e)})}).catch(function(){})},handleSave:function(){var e=this,t=this;this.lookloading=!0,""!=t.editForm.banner_order&&null!=t.editForm.banner_order||(t.editForm.banner_order=1),l.default.post(t.saveurl,{id:t.editForm.id,banner_name:t.editForm.banner_name,banner_pic:t.editForm.banner_pic,banner_html:t.editForm.banner_html,banner_order:t.editForm.banner_order,pic_base:t.editForm.pic_base,tote:t.tableData.length},function(a){if(e.lookloading=!1,200==a.status&&a.data&&200==a.data.statusCode)return t.loadData(),void(t.dialogFormVisible=!1);e.$message.error({title:"错误",message:a.data.msg})}).catch(function(a){e.lookloading=!1,t.$eventHub.$emit("error",a)})},uploadChange:function(e){var t=this,a=this;e.target.files.length>0&&(this.files=e.target.files[0],this.getBase64(e.target,function(e){t.imgDataUrl="data:image/png;base64,"+e,a.editForm.pic_base=e}))},getBase64:function(e,t){if(e.files&&e.files[0]){if(e.files[0].size>2019200)return void alert("图片不能超过2M");var a=new FileReader;a.onload=function(e){var a=e.target.result,n=new Image;n.onload=function(){var e=document.getElementById("canvasBase64Imgid");null!=e&&document.body.removeChild(e);var e=document.createElement("canvas");e.innerHTML="New Canvas",e.setAttribute("id","canvasBase64Imgid"),e.style.display="none",document.body.appendChild(e),e.width=this.width,e.height=this.height;var a=this.width,n=this.height,r=e.getContext("2d");r.clearRect(0,0,a,n),r.drawImage(this,0,0,a,n);var o=e.toDataURL("image/png",1),i=o.substr(22);t(i)},n.src=a},a.readAsDataURL(e.files[0])}},handleFalse:function(){return!1}}}},avvJ:function(e,t,a){"use strict";function n(e){a("BMLc")}Object.defineProperty(t,"__esModule",{value:!0});var r=a("MPQd"),o=a.n(r),i=a("8VBI"),l=a("VU/8"),d=n,s=l(o.a,i.a,!1,d,"data-v-a41851ca",null);t.default=s.exports},woQ9:function(e,t,a){"use strict";function n(e){if(console.log("time=",e),e.length>20){return e.substring(0,10)+" "+e.substring(11,19)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.fdate=n}});