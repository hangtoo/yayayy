webpackJsonp([22],{"9bBU":function(e,t,a){a("mClu");var o=a("FeBl").Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},FFEy:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"角色编码"},model:{value:e.searchForm.rolecode,callback:function(t){e.$set(e.searchForm,"rolecode",t)},expression:"searchForm.rolecode"}}),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"角色名称"},model:{value:e.searchForm.rolename,callback:function(t){e.$set(e.searchForm,"rolename",t)},expression:"searchForm.rolename"}}),e._v(" "),a("el-button-group",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,border:""},on:{"sort-change":e.handleSort}},[a("el-table-column",{attrs:{prop:"rolecode",label:"角色编码",sortable:"",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rolename",label:"角色名称",sortable:"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"150",formatter:e.stateformatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"descr",label:"角色描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sysflag",label:"角色类型",width:"100",formatter:e.sysflagformatter}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.searchForm.totalRow},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑角色信息",visible:e.dialogFormVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.id,expression:"editForm.id"}],attrs:{type:"hidden"},domProps:{value:e.editForm.id},on:{input:function(t){t.target.composing||e.$set(e.editForm,"id",t.target.value)}}}),e._v(" "),a("el-form-item",{attrs:{label:"角色编码"}},[a("el-input",{attrs:{disabled:!e.editForm.abled.rolecode},model:{value:e.editForm.rolecode,callback:function(t){e.$set(e.editForm,"rolecode",t)},expression:"editForm.rolecode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{model:{value:e.editForm.rolename,callback:function(t){e.$set(e.editForm,"rolename",t)},expression:"editForm.rolename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.state,callback:function(t){e.$set(e.editForm,"state",t)},expression:"editForm.state"}},e._l(e.stateoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述"}},[a("el-input",{model:{value:e.editForm.descr,callback:function(t){e.$set(e.editForm,"descr",t)},expression:"editForm.descr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.sysflag,callback:function(t){e.$set(e.editForm,"sysflag",t)},expression:"editForm.sysflag"}},e._l(e.sysflagoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"功能权限"}},[a("el-tree",{ref:"menutree",attrs:{data:e.menuoptions,"show-checkbox":"","default-expand-all":"","node-key":"id","default-checked-keys":e.editForm_sysMenu_ids}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},l=[],r={render:o,staticRenderFns:l};t.a=r},"P+ZH":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".handle-box[data-v-e1d1b718]{margin-bottom:20px}.handle-select[data-v-e1d1b718]{width:120px}.handle-input[data-v-e1d1b718]{width:150px;display:inline-block}",""])},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var o=a("C4MV"),l=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(e,t,a){return t in e?(0,l.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},dcKf:function(e,t,a){var o=a("P+ZH");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("dbfa5918",o,!0)},mClu:function(e,t,a){var o=a("kM2E");o(o.S+o.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},vJXG:function(e,t,a){"use strict";function o(e){a("dcKf")}Object.defineProperty(t,"__esModule",{value:!0});var l=a("wEyE"),r=a.n(l),n=a("FFEy"),s=a("VU/8"),i=o,d=s(r.a,n.a,!1,i,"data-v-e1d1b718",null);t.default=d.exports},wEyE:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a("bOdI"),r=o(l),n=a("woOf"),s=o(n),i=a("3pLw"),d=o(i);t.default={data:function(){return{getdataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysRole/getId.do",dataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysRole/dataList.do",saveurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysRole/save.do",deleteurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysRole/delete.do",menutreeurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysMenu/getMenusTable.do",dialogFormVisible:!1,editLoading:!1,editForm:{rolename:"",rolecode:"",state:"",descr:"",sysflag:0,abled:{rolename:!0}},editForm_sysMenu_ids:[],searchForm:{rolename:"",rolecode:"",pageNum:1,totalRow:0,pageSize:10,is_search:!1,order:""},tableData:[],multipleSelection:[],stateoptions:[{value:0,label:"启用"},{value:1,label:"未启用"}],sysflagoptions:[{value:0,label:"功能权限"},{value:1,label:"审批权限"}],menuoptions:[],imenutree:0}},created:function(){this.loadData(),this.loadMenuData()},computed:{data:function(){return this.tableData}},methods:(0,r.default)({handleCheckChange:function(e,t){++this.imenutree%2==0&&(this.$refs.menutree.setCheckedNodes([]),this.$refs.menutree.setCheckedNodes([e]))},handleCurrentChange:function(e){this.searchForm.pageNum=e,this.loadData()},loadData:function(){var e=this,t=this;d.default.post(t.dataurl,this.searchForm,function(a){t.tableData=a.data.list,t.searchForm.totalRow=a.data.totalRow,e.searchForm.is_search=!1}).catch(function(t){e.$eventHub.$emit("error",t)})},loadMenuData:function(){var e=this,t=this;d.default.post(t.menutreeurl,{},function(e){t.menuoptions=e.data}).catch(function(t){e.$eventHub.$emit("error",t)})},handleSearch:function(){this.searchForm.is_search=!0,this.loadData()},handleSort:function(e){return console.log(e),this.searchForm.order=e.prop+" "+e.order.replace("ending",""),this.handleSearch(),!1},stateformatter:function(e,t){return"0"==e.state?"启用":"未启用"},sysflagformatter:function(e,t){return"0"==e.sysflag?"功能权限":"审批权限"},handleAdd:function(){this.dialogFormVisible=!0,this.editForm={state:0,sysflag:0,abled:{rolecode:!0}}},handleEdit:function(e,t){var a=this;a.dialogFormVisible=!0,a.editForm=(0,s.default)({},t),a.editForm.abled||(a.editForm.abled={}),a.editForm.abled.rolecode=!1,d.default.post(a.getdataurl+"?id="+a.editForm.id,{},function(e){a.editForm_menuids=e.data.menuids,a.editForm_btnids=e.data.btnids,e.data.menuids&&(a.editForm_sysMenu_ids=e.data.menuids,a.$refs.menutree.setCheckedKeys(a.editForm_sysMenu_ids))}).catch(function(e){a.$eventHub.$emit("error",e)})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=a;console.log(t),d.default.post(e.deleteurl,{id:t.id},function(t){e.loadData(),a.$message({type:"success",message:"删除成功!"})}).catch(function(t){e.$eventHub.$emit("error",t)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSave:function(){var e=this,t=this,a=t.$refs.menutree.getCheckedKeys();d.default.post(t.saveurl,{id:t.editForm.id,rolecode:t.editForm.rolecode,rolename:t.editForm.rolename,state:t.editForm.state,sysflag:t.editForm.sysflag,descr:t.editForm.descr,menuids:a},function(a){e.$message({message:a.data.msg}),t.loadData(),t.dialogFormVisible=!1}).catch(function(e){t.$eventHub.$emit("error",e)})},handleSelectionChange:function(e){this.multipleSelection=e},handleReset:function(){this.searchForm.is_search=!1,this.searchForm={rolecode:"",rolename:"",pageNum:1,totalRow:0,pageSize:10,is_search:!1,order:""}},handleFalse:function(){return!1}},"handleReset",function(){this.searchForm.is_search=!1,this.searchForm={rolecode:"",rolename:"",pageNum:1,totalRow:0,pageSize:10,is_search:!1,order:""}})}}});