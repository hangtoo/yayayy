webpackJsonp([13],{"/ZfT":function(e,t,a){"use strict";function n(e){a("5/E2")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("sJX8"),o=a.n(i),l=a("ZbgC"),r=a("VU/8"),d=n,s=r(o.a,l.a,!1,d,"data-v-11d97566",null);t.default=s.exports},"4JPq":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"@keyframes treeTableShow{0%{opacity:0}to{opacity:1}}@-webkit-keyframes treeTableShow{0%{opacity:0}to{opacity:1}}",""])},"5/E2":function(e,t,a){var n=a("aCwQ");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("5bb3bf0c",n,!0)},"E/TR":function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},FPcI:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("dXij"),o=n(i),l=a("ZDt+"),r=n(l);t.default={name:"treeTable",props:{showSelection:{type:Boolean,default:function(){return!0}},data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},handleTreeEdit:{},handleTreeDel:{},handleSelectionChange:{}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||r.default,a=this.evalArgs?(0,o.default)([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,a)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0}}}},VAmM:function(e,t,a){var n=a("ZLU7");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("2328d373",n,!0)},"ZDt+":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[];return(0,l.default)(e).forEach(function(e){void 0===e._expanded&&d.default.set(e,"_expanded",t);var l=1;if(void 0!==n&&null!==n&&(l=n+1),d.default.set(e,"_level",l),a&&d.default.set(e,"parent",a),o.push(e),e.children&&e.children.length>0){var r=i(e.children,t,e,l);o=o.concat(r)}}),o}Object.defineProperty(t,"__esModule",{value:!0});var o=a("c/Tr"),l=n(o);t.default=i;var r=a("7+uW"),d=n(r)},ZLU7:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,'.ms-tree-space[data-v-365aee7c]{position:relative;top:1px;display:inline-block;font-style:normal;font-weight:400;line-height:1;width:18px;height:14px}.ms-tree-space[data-v-365aee7c]:before{content:""}.processContainer[data-v-365aee7c]{width:100%;height:100%}table td[data-v-365aee7c]{line-height:26px}.tree-ctrl[data-v-365aee7c]{position:relative;cursor:pointer;color:#2196f3;margin-left:-18px}',""])},ZbgC:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("tree-table",{attrs:{data:e.dataSource,columns:e.columns,expandAll:e.treeParams.defaultExpandAll,border:"",handleSelectionChange:e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleTreeEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleTreeDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑部门信息",visible:e.dialogFormVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.id,expression:"editForm.id"}],attrs:{type:"hidden"},domProps:{value:e.editForm.id},on:{input:function(t){t.target.composing||e.$set(e.editForm,"id",t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.parentid,expression:"editForm.parentid"}],attrs:{type:"hidden"},domProps:{value:e.editForm.parentid},on:{input:function(t){t.target.composing||e.$set(e.editForm,"parentid",t.target.value)}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门编码"}},[a("el-input",{model:{value:e.editForm.code,callback:function(t){e.$set(e.editForm,"code",t)},expression:"editForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门描述"}},[a("el-input",{model:{value:e.editForm.descr,callback:function(t){e.$set(e.editForm,"descr",t)},expression:"editForm.descr"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},i=[],o={render:n,staticRenderFns:i};t.a=o},aCwQ:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".search-box[data-v-11d97566]{margin-bottom:0}.handle-box[data-v-11d97566]{margin-bottom:20px}.handle-select[data-v-11d97566]{width:120px}.handle-input[data-v-11d97566]{width:300px;display:inline-block}",""])},dXij:function(e,t,a){e.exports={default:a("E/TR"),__esModule:!0}},j19q:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow},on:{"selection-change":e.handleSelectionChange}},"el-table",e.$attrs,!1),[e.showSelection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),0===e.columns.length?a("el-table-column",{attrs:{width:"150",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n      "+e._s(t.$index)+"\n    ")]}}])}):e._l(e.columns,function(t,n){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(i){return[e._l(i.row._level,function(t){return 0===n?a("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(n,i.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){e.toggleExpanded(i.$index)}}},[i.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n      "+e._s(i.row[t.value])+"\n    ")]}}])})}),e._v(" "),e._t("default")],2)},i=[],o={render:n,staticRenderFns:i};t.a=o},nmfJ:function(e,t,a){var n=a("4JPq");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("38bf7060",n,!0)},s3ol:function(e,t,a){"use strict";function n(e){a("nmfJ"),a("VAmM")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("FPcI"),o=a.n(i),l=a("j19q"),r=a("VU/8"),d=n,s=r(o.a,l.a,!1,d,"data-v-365aee7c",null);t.default=s.exports},sJX8:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=n(i),l=a("s3ol"),r=n(l),d=a("3pLw"),s=n(d);t.default={name:"Department",data:function(){return{dataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysDepartment/getDepartmentTable.do",saveurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysDepartment/save.do",deleteurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/sysDepartment/delete.do",dialogFormVisible:!1,editForm:{name:"",url:"",rank:1},editLoading:!1,columns:[{text:"部门名称",value:"name",dataIndex:"name"},{text:"部门编码",value:"code",dataIndex:"code"},{text:"部门描述",value:"descr",dataIndex:"descr"}],dataSource:[],treeParams:{requestUrl:"menu",treeType:"normal",defaultExpandAll:!0,table_id:null}}},created:function(){this.loadData()},methods:{loadData:function(){var e=this,t=this;s.default.post(t.dataurl,{},function(t){console.log(t),e.dataSource=[];for(var a=0;a<t.data.length;a++)e.dataSource.push(t.data[a])}).catch(function(t){e.$eventHub.$emit("error",t)})},handleAdd:function(){this.dialogFormVisible=!0,this.treeParams.table_id?this.editForm={parentid:this.treeParams.table_id}:this.editForm={}},handleSave:function(){var e=this,t=this;s.default.post(t.saveurl,{id:t.editForm.id,name:t.editForm.name,code:t.editForm.code,parentid:t.editForm.parentid,descr:t.editForm.descr},function(t){e.$message({message:t.data.msg}),e.loadData(),e.dialogFormVisible=!1}).catch(function(t){e.$eventHub.$emit("error",t)})},handleTreeEdit:function(e,t){this.dialogFormVisible=!0,this.editForm=(0,o.default)({},t),this.table_index=e},handleTreeDel:function(e,t){var a=this;this.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=a;s.default.post(e.deleteurl,{id:t.id},function(e){a.loadData(),a.dialogFormVisible=!1}).catch(function(e){a.$eventHub.$emit("error",e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(e){if(console.log(e),e instanceof Array){0==e.length&&(this.treeParams.table_id=null);for(var t in e)0==t?this.treeParams.table_id=e[t].id:this.treeParams.table_id==e[t].parentid&&(this.treeParams.table_id=e[t].id)}}},components:{treeTable:r.default}}}});