webpackJsonp([35],{"/eFW":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.data,border:""},on:{"sort-change":t.handleSort}},[a("el-table-column",{attrs:{prop:"id",label:"头条id",align:"center",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"头条名称",align:"center","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"article_type",label:"头条类型",align:"center","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"publishtime",label:"发布时间",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"top_flag",label:"置顶状态",align:"center",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handlePage(e.$index,e.row)}}},[t._v("文章")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.searchForm.totalRow},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"理财头条",visible:t.dialogFormVisible,size:"tiny"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.lookloading,expression:"lookloading"}],ref:"editForm",attrs:{model:t.editForm,"label-width":"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.id,expression:"editForm.id"}],attrs:{type:"hidden"},domProps:{value:t.editForm.id},on:{input:function(e){e.target.composing||t.$set(t.editForm,"id",e.target.value)}}}),t._v(" "),a("el-form-item",{attrs:{label:"头条名称"}},[a("el-input",{model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title",e)},expression:"editForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"头条图片"}},[a("div",{staticClass:"imgSrc"},[a("span",{staticStyle:{"white-space":"pre"}}),a("img",{attrs:{src:t.imgDataUrl,width:"200"}})]),t._v(" "),a("div",{staticClass:"a-upload"},[a("input",{staticClass:"upload__input",attrs:{type:"file",name:"file",accept:"image/png,image/jpeg"},on:{change:t.uploadChange}}),t._v("选择文件上传\r\n\t\t\t\t")])]),t._v(" "),a("el-form-item",{attrs:{label:"头条类型"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.editForm.article_type,callback:function(e){t.$set(t.editForm,"article_type",e)},expression:"editForm.article_type"}},t._l(t.art_type,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{attrs:{editable:!1,type:"datetime"},model:{value:t.editForm.publishtime,callback:function(e){t.$set(t.editForm,"publishtime",e)},expression:"editForm.publishtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否置顶"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.editForm.top_flag,callback:function(e){t.$set(t.editForm,"top_flag",e)},expression:"editForm.top_flag"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.handleSave}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"头条页面",visible:t.dialogPageVisible,width:"80%"},on:{"update:visible":function(e){t.dialogPageVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.id,expression:"editForm.id"}],attrs:{type:"hidden"},domProps:{value:t.editForm.id},on:{input:function(e){e.target.composing||t.$set(t.editForm,"id",e.target.value)}}}),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-input",{attrs:{autosize:{minRows:12,maxRows:20},type:"textarea"},model:{value:t.editForm.htmlpage,callback:function(e){t.$set(t.editForm,"htmlpage",e)},expression:"editForm.htmlpage"}})],1),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.handleSavePage}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogPageVisible=!1}}},[t._v("取消")])],1)])],1)],1)},l=[],o={render:i,staticRenderFns:l};e.a=o},OZXE:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".handle-box[data-v-98bff69e]{margin-bottom:20px}.handle-select[data-v-98bff69e]{width:120px}.handle-input[data-v-98bff69e]{width:150px;display:inline-block}.a-upload[data-v-98bff69e]{padding:4px 10px;height:28px;line-height:20px;position:relative;cursor:pointer;color:#888;background:#fafafa;border:1px solid #ddd;border-radius:4px;overflow:hidden;display:inline-block;*display:inline;*zoom:1}.a-upload input[data-v-98bff69e]{position:absolute;font-size:100px;right:0;top:0;opacity:0;filter:alpha(opacity=0);cursor:pointer}.a-upload[data-v-98bff69e]:hover{color:#444;background:#eee;border-color:#ccc;text-decoration:none}",""])},W5j8:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a("mvHQ"),o=i(l),n=a("woOf"),r=i(n),s=a("3pLw"),d=i(s),c=a("woQ9");e.default={data:function(){return{getdataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/getId.do",dataurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/dataList.do",saveurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/save.do",saveimgurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/saveImg.do",savehtmlurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/saveHtml.do",gethtmlurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/getHtml.do",deleteurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tArticle/delete.do",getinvestlurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/tInvestInfo/getInvest.do",uploadurl:"http://10.0.1.152:9999/sunvue-gateway-webapp/file/upload.do",dialogFormVisible:!1,dialogPageVisible:!1,editLoading:!1,lookloading:!1,imgDataUrl:"",editForm:{title:"",title_pic:"",pic_base:"",invest_link:"",publishtime:"",show_flag:"",top_flag:"",html_link:"",htmlpage:"",createtime:"",abled:{title:!1,title_pic:!1,invest_link:!1,publishtime:!1,show_flag:!1,top_flag:!1,html_link:!1,createtime:!0}},art_type:[{value:"1",label:"投资推荐"},{value:"2",label:"经验分享"},{value:"3",label:"理财资讯"},{value:"4",label:"其他"}],searchForm:{title:"",title_pic:"",invest_link:"",publishtime:"",show_flag:"",top_flag:"",html_link:"",createtime:"",pageNum:1,totalRow:0,pageSize:10,is_search:!1,order:""},tableData:[],invest_options:"",files:[]}},created:function(){this.loadData()},computed:{data:function(){return this.tableData}},methods:{getInvestData:function(){var t=this,e=this;d.default.post(e.getinvestlurl,{},function(t){e.invest_options=t.data.list,console.log(e.invest_options)}).catch(function(e){t.$eventHub.$emit("error",e)})},loadData:function(){var t=this,e=this;d.default.post(e.dataurl,this.searchForm,function(a){e.tableData=a.data.list,e.searchForm.totalRow=a.data.totalRow,t.searchForm.is_search=!1;for(var i=0;i<e.tableData.length;i++){var l=e.tableData[i].top_flag;"0"==l&&(e.tableData[i].top_flag=""),"1"==l&&(e.tableData[i].top_flag="置顶中");var o=e.tableData[i].article_type;"1"==o&&(e.tableData[i].article_type="投资推荐"),"2"==o&&(e.tableData[i].article_type="经验分享"),"3"==o&&(e.tableData[i].article_type="理财资讯"),"4"==o&&(e.tableData[i].article_type="其他"),null!=e.tableData[i].createtime&&(e.tableData[i].createtime=(0,c.fdate)(e.tableData[i].createtime)),null!=e.tableData[i].publishtime&&(e.tableData[i].publishtime=(0,c.fdate)(e.tableData[i].publishtime))}}).catch(function(e){t.$eventHub.$emit("error",e)})},handleCurrentChange:function(t){this.searchForm.pageNum=t,this.loadData()},handleSearch:function(){this.searchForm.is_search=!0,this.loadData()},handleSort:function(t){return console.log(t),this.searchForm.order=t.prop+" "+t.order.replace("ending",""),this.handleSearch(),!1},handleAdd:function(){this.dialogFormVisible=!0,this.lookloading=!1,this.imgDataUrl="",this.editForm={title:"",title_pic:"",invest_link:"",publishtime:"",show_flag:"",top_flag:"",html_link:"",createtime:"",abled:{title:!1,title_pic:!1,invest_link:!1,publishtime:!1,show_flag:!1,top_flag:!1,html_link:!1,createtime:!0}}},handleEdit:function(t,e){var a=this,i=this;i.dialogFormVisible=!0,this.lookloading=!1,i.editForm=(0,r.default)({},e),i.editForm.abled||(i.editForm.abled={}),i.editForm.abled.rolecode=!1,d.default.post(i.getdataurl+"?id="+i.editForm.id,{},function(t){i.editForm.title=t.data.title,i.editForm.title_pic=t.data.title_pic,i.editForm.invest_link=t.data.invest_link,i.editForm.publishtime=t.data.publishtime,i.editForm.show_flag=t.data.show_flag,i.editForm.top_flag=t.data.top_flag,i.editForm.html_link=t.data.html_link,i.editForm.article_type=t.data.article_type,i.editForm.createtime=t.data.createtime,a.imgDataUrl="http://img-demo.oss-cn-hangzhou.aliyuncs.com/"+t.data.title_pic+"?x-oss-process=image/resize,w_200"}).catch(function(t){i.$eventHub.$emit("error",t)})},handlePage:function(t,e){var a=this;a.editForm=(0,r.default)({},e),d.default.post(a.gethtmlurl,{id:a.editForm.id},function(t){a.editForm.htmlpage=t.data.htmlpage,a.dialogPageVisible=!0}).catch(function(t){a.$eventHub.$emit("error",t)})},handleDelete:function(t,e){var a=this;this.$confirm("确定删除此条头条？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d.default.post(a.deleteurl,{id:e.id},function(t){a.loadData()}).catch(function(t){a.$eventHub.$emit("error",t)})}).catch(function(){})},uploadChange:function(t){var e=this,a=this;t.target.files.length>0&&(this.files=t.target.files[0],this.getBase64(t.target,function(t){e.imgDataUrl="data:image/png;base64,"+t,a.editForm.pic_base=t}))},handleSave:function(){var t=this,e=this;this.lookloading=!0,d.default.post(e.saveurl,{id:e.editForm.id,title:e.editForm.title,title_pic:e.editForm.title_pic,invest_link:e.editForm.invest_link,publishtime:e.editForm.publishtime,show_flag:e.editForm.show_flag,top_flag:e.editForm.top_flag,html_link:e.editForm.html_link,article_type:e.editForm.article_type,createtime:e.editForm.createtime,pic_base:e.editForm.pic_base},function(a){if(t.lookloading=!1,200==a.status&&a.data&&200==a.data.statusCode)return e.loadData(),void(e.dialogFormVisible=!1);t.$message.error({title:"错误",message:a.data.msg})}).catch(function(t){e.$eventHub.$emit("error",t)})},handleSavePage:function(){var t=this,e=this;d.default.post(e.savehtmlurl,{id:e.editForm.id,html_link:e.editForm.htmlpage},function(e){t.dialogPageVisible=!1}).catch(function(t){e.$eventHub.$emit("error",t)})},handleFalse:function(){return!1},getBase64:function(t,e){if(t.files&&t.files[0]){if(t.files[0].size>2019200)return void alert("图片不能超过2M");var a=new FileReader;a.onload=function(t){var a=t.target.result,i=new Image;i.onload=function(){var t=document.getElementById("canvasBase64Imgid");null!=t&&document.body.removeChild(t);var t=document.createElement("canvas");t.innerHTML="New Canvas",t.setAttribute("id","canvasBase64Imgid"),t.style.display="none",document.body.appendChild(t),t.width=this.width,t.height=this.height;var a=this.width,i=this.height,l=t.getContext("2d");l.clearRect(0,0,a,i),l.drawImage(this,0,0,a,i);var o=t.toDataURL("image/png",1),n=o.substr(22);e(n)},i.src=a},a.readAsDataURL(t.files[0])}},addSub:function(){var t=this,e={},a=this.files,i=new FormData;""!=a?i.append("file",a,a.name):this.$message.error("请添加图片"),i.append("param",(0,o.default)(e));var l={headers:{"Content-Type":"multipart/form-data"}};this.$ajax.post(this.uploadurl,i,l).then(function(e){var a=e.data;a.status?(t.$message({message:"新增成功",type:"success"}),t.imgDataUrl="",t.files=[]):t.msg(a.msg)})}}}},bdoL:function(t,e,a){var i=a("OZXE");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("1d1858e5",i,!0)},oVxT:function(t,e,a){"use strict";function i(t){a("bdoL")}Object.defineProperty(e,"__esModule",{value:!0});var l=a("W5j8"),o=a.n(l),n=a("/eFW"),r=a("VU/8"),s=i,d=r(o.a,n.a,!1,s,"data-v-98bff69e",null);e.default=d.exports},woQ9:function(t,e,a){"use strict";function i(t){if(console.log("time=",t),t.length>20){return t.substring(0,10)+" "+t.substring(11,19)}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.fdate=i}});